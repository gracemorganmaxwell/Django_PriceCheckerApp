{% extends "base.html" %}

{% block title %}Products{% endblock %}

{% block content %}
    <div class="container mx-auto">
        <h2 class="text-3xl font-bold mb-4">Products</h2>

        <!-- Search and Filter Form -->
        <form method="GET" class="mb-4">
            <div class="flex space-x-4">
                <!-- Search Box -->
                <input 
                    type="text" 
                    name="q" 
                    placeholder="Search products..." 
                    value="{{ query }}" 
                    class="border px-4 py-2 rounded w-full"
                />

                <!-- Filter Dropdown (Product Source) -->
                <select name="source" class="border px-4 py-2 rounded w-1/4">
                    <option value="">All Sources</option>
                    {% for source in distinct_sources %}
                        <option value="{{ source }}" {% if product_source == source %}selected{% endif %}>
                            {{ source }}
                        </option>
                    {% endfor %}
                </select>

                <!-- Submit Button -->
                <button type="submit" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">
                    Search
                </button>
            </div>
        </form>

        <!-- Add Product Button -->
        <a href="{% url 'product-create' %}" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 mb-4">
            Add New Product
        </a>

        <!-- Product List -->
        <ul class="mt-4">
            {% if product_list %}
                {% for product in product_list %}
                <li class="mb-2">
                        <a href="{% url 'product-detail' product.pk %}" class="text-blue-500 hover:underline">
                            {{ product.product_name }}
                        </a>
                        <p> {{ product.product_source_site }}</p>
                </li>
            {% endfor %}
            {% else %}
                <li>No products found.</li>
            {% endif %}
        </ul>
    </div>
    {% for product in product_list %}
    <li class="mb-2">
        <a href="{% url 'product-detail' product.pk %}" class="text-blue-500 hover:underline">{{ product.product_name }}</a>
        <p> {{product.product_source_site}}</p>
        
    </li>
{% endfor %}

{% endblock %}



